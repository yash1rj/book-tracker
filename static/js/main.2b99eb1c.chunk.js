(this["webpackJsonpbook-tracker"]=this["webpackJsonpbook-tracker"]||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),s=n(17),a=n.n(s),i=(n(23),n(2)),r=(n(24),n(25),n(26),n(9)),l=n(11),j="https://reactnd-books-api.udacity.com",d=localStorage.token;d||(d=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:d},h=n(0),u=o.a.createContext({books:[],loading:!1,dropDownChanged:function(e,t){}}),O=function(e){var t=Object(c.useState)([]),n=Object(r.a)(t,2),o=n[0],s=n[1],a=Object(c.useState)(!1),i=Object(r.a)(a,2),d=i[0],O=i[1],f=Object(c.useCallback)((function(){O(!0),fetch("".concat(j,"/books"),{headers:b}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){O(!1),s(e)}))}),[]);Object(c.useEffect)((function(){f()}),[f]);return Object(h.jsx)(u.Provider,{value:{books:o,loading:d,dropDownChanged:function(e,t){(function(e,t){return fetch("".concat(j,"/books/").concat(e.id),{method:"PUT",headers:Object(l.a)(Object(l.a)({},b),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))})({id:t},e).then((function(){f()}))}},children:e.children})},f=u,x=function(e){var t=Object(c.useContext)(f).dropDownChanged;return Object(h.jsx)("div",{className:"book-shelf-changer",children:Object(h.jsxs)("select",{value:e.shelf||"none",onChange:function(n){t(n.target.value,e.id)},children:[Object(h.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(h.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(h.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(h.jsx)("option",{value:"read",children:"Read"}),Object(h.jsx)("option",{value:"none",children:"None"})]})})},k=(n(28),function(e){return Object(h.jsx)("li",{children:Object(h.jsxs)("div",{className:"book",children:[Object(h.jsxs)("div",{className:"book-top",children:[Object(h.jsx)("div",{className:"book-cover",style:{width:128,height:170,backgroundImage:'url("'.concat(e.imageLink.thumbnail,'")'),backgroundColor:"#cccccc"}}),Object(h.jsx)(x,{id:e.id,shelf:e.shelf})]}),Object(h.jsx)("div",{className:"book-title",children:e.title||""}),Object(h.jsx)("div",{className:"book-authors",children:e.authors||""})]})})}),v=(n(29),function(e){var t=e.bookData,n=e.id,c=t.filter((function(e){return e.shelf===n})).map((function(e){return Object(h.jsx)(k,{id:e.id,title:e.title,authors:e.authors,shelf:e.shelf,imageLink:e.imageLinks||""},e.id)}));return Object(h.jsxs)("div",{className:"bookshelf",children:[Object(h.jsx)("h2",{className:"bookshelf-title",children:e.title}),Object(h.jsx)("div",{className:"bookshelf-books",children:Object(h.jsx)("ol",{className:"books-grid",children:c&&c.length?c:Object(h.jsx)("h3",{children:"Loading..."})})})]})}),m=n(8),g=(n(30),function(){return Object(h.jsx)("div",{className:"spinnerContainer",children:Object(h.jsx)("div",{className:"lds-dual-ring"})})}),p=function(e){var t=Object(c.useContext)(f),n=t.books,o=t.loading;return Object(h.jsxs)("div",{className:"list-books",children:[Object(h.jsx)("div",{className:"list-books-title",children:Object(h.jsx)("h1",{children:"Book-Tracker"})}),Object(h.jsxs)("div",{className:"list-books-content",children:[o&&Object(h.jsx)(g,{}),n&&!o&&Object(h.jsxs)("div",{children:[Object(h.jsx)(v,{id:"currentlyReading",title:"Currently Reading",bookData:n}),Object(h.jsx)(v,{id:"wantToRead",title:"Want to Read",bookData:n}),Object(h.jsx)(v,{id:"read",title:"Read",bookData:n})]})]}),Object(h.jsx)("div",{className:"open-search",children:Object(h.jsx)(m.b,{to:"/search",children:Object(h.jsx)("button",{children:"Add a book"})})})]})},N=(n(36),function(e){var t,n=Object(c.useContext)(f).books,o=0,s=Object(c.useState)(),a=Object(r.a)(s,2),i=a[0],d=a[1],u=Object(c.useState)(0),O=Object(r.a)(u,2),x=O[0],v=O[1];return i||(t=Object(h.jsx)("h3",{children:"Waiting for input."})),x&&(t=Object(h.jsx)("h3",{children:"No results found !"})),i&&!x&&(t=i.map((function(e){var t="none";return n.forEach((function(n){n.id===e.id&&(t=n.shelf)})),Object(h.jsx)(k,{id:e.id,title:e.title,authors:e.authors,shelf:t,imageLink:e.imageLinks||""},e.id)}))),Object(h.jsxs)("div",{className:"search-books",children:[Object(h.jsxs)("div",{className:"search-books-bar",children:[Object(h.jsx)(m.b,{to:"/",children:Object(h.jsx)("button",{className:"close-search",children:"Close"})}),Object(h.jsx)("div",{className:"search-books-input-wrapper",children:Object(h.jsx)("input",{type:"text",autoFocus:!0,placeholder:"Search by title or author",onChange:function(e){var t=e.target.value;o&&clearTimeout(o),o=setTimeout((function(){var e;t?(e=t,fetch("".concat(j,"/search"),{method:"POST",headers:Object(l.a)(Object(l.a)({},b),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){e.error?v(1):(d(e),v(0))})):(d(null),v(0))}),300)}})})]}),Object(h.jsx)("div",{className:"search-books-results",children:Object(h.jsx)("ol",{className:"books-grid",children:t})})]})});var C=function(){return Object(h.jsx)("div",{className:"app",children:Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{path:"/",exact:!0,children:Object(h.jsx)(p,{})}),Object(h.jsx)(i.a,{path:"/search",exact:!0,children:Object(h.jsx)(N,{})}),Object(h.jsx)(i.a,{path:"*",children:Object(h.jsx)(p,{})})]})})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),s(e),a(e)}))};a.a.render(Object(h.jsx)(O,{children:Object(h.jsx)(m.a,{basename:"/book-tracker/",children:Object(h.jsx)(C,{})})}),document.getElementById("root")),y()}},[[37,1,2]]]);
//# sourceMappingURL=main.2b99eb1c.chunk.js.map